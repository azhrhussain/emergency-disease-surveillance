<section ngClass="questionnaire-main">
  <div ngClass="container">
    <!-- <header class="text-center">
      <h2 class="h2">Pakistan Flood Response 2022</h2>
      <h2 class="h2">
        Emergency Disease Surveillance System (EDSS) Reporting Form
      </h2>
      <h2 class="h2">Health Facility Level/Medical & Health Camp</h2>
    </header>-->
    <div class="spacer1"></div>
    <div class="spacer1"></div> 

    <mat-grid-list class="col-space-reset" rowHeight="80px" cols="4">
      <mat-grid-tile ngClass="col-space-reset">
        <mat-form-field appearance="fill">
          <mat-label>Submitted by</mat-label>
          <mat-select [(value)]="hypothisis.submittedBy" [disabled]="true">
            <mat-option *ngFor="let user of users" [value]="user">
              {{ user }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile>
        <mat-form-field appearance="fill">
          <mat-label>Reporting Date</mat-label>
          <input
            matInput
            placeholder="Ex. 09/23/2022"
            [(ngModel)]="hypothisis.reportingDate"
          />
        </mat-form-field>
      </mat-grid-tile>

      <mat-grid-tile>
        <mat-form-field appearance="fill">
          <mat-label>Province</mat-label>
          <mat-select [(value)]="hypothisis.province" [disabled]="true">
            <mat-option *ngFor="let province of provinces" [value]="province">
              {{ province }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile>
        <mat-form-field appearance="fill">
          <mat-label>District</mat-label>
          <textarea
            matInput
            cdkTextareaAutosize
            #autosize="cdkTextareaAutosize"
            cdkAutosizeMinRows="1"
            cdkAutosizeMaxRows="5"
            placeholder="Ex. Dera Ismail Khan"
            [(ngModel)]="hypothisis.districts"
          ></textarea>
        </mat-form-field>
      </mat-grid-tile>
      
      <mat-grid-tile>
        <mat-form-field appearance="fill">
          <mat-label>Tehsil/Taluka</mat-label>
          <textarea
            matInput
            cdkTextareaAutosize
            #autosize="cdkTextareaAutosize"
            cdkAutosizeMinRows="1"
            cdkAutosizeMaxRows="5"
            placeholder="Ex. Daraban"
            [(ngModel)]="hypothisis.tehsil"
          ></textarea>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile>
        <mat-form-field appearance="fill">
          <mat-label>UC/Village/settlement</mat-label>
          <textarea
            matInput
            cdkTextareaAutosize
            #autosize="cdkTextareaAutosize"
            cdkAutosizeMinRows="1"
            cdkAutosizeMaxRows="5"
            placeholder="Ex. Uc Musa Zai"
            [(ngModel)]="hypothisis.uc"
          ></textarea>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile>
        <mat-form-field appearance="fill">
          <mat-label>Health Facility Name</mat-label>
          <textarea
            matInput
            cdkTextareaAutosize
            #autosize="cdkTextareaAutosize"
            cdkAutosizeMinRows="1"
            cdkAutosizeMaxRows="5"
            placeholder="Ex. BHU Musa zai"
            [(ngModel)]="hypothisis.healthFacilityName"
          ></textarea>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile>
        <mat-form-field appearance="fill">
          <mat-label>Health Facility Type</mat-label>
          <textarea
            matInput
            cdkTextareaAutosize
            #autosize="cdkTextareaAutosize"
            cdkAutosizeMinRows="1"
            cdkAutosizeMaxRows="5"
            placeholder="Ex. BHU"
            [(ngModel)]="hypothisis.healthFacilityType"
          ></textarea>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile>
        <mat-form-field appearance="fill">
          <mat-label>Health Facility Code</mat-label>
          <textarea
            matInput
            cdkTextareaAutosize
            #autosize="cdkTextareaAutosize"
            cdkAutosizeMinRows="1"
            cdkAutosizeMaxRows="5"
            placeholder="Ex. 12345"
            [(ngModel)]="hypothisis.healthFacilityCode"
          ></textarea>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile>
        <mat-form-field appearance="fill">
          <mat-label>Medical/Health Camp</mat-label>
          <textarea
            matInput
            cdkTextareaAutosize
            #autosize="cdkTextareaAutosize"
            cdkAutosizeMinRows="1"
            cdkAutosizeMaxRows="5"
            placeholder="Ex. BHU Musa Zai"
            [(ngModel)]="hypothisis.healthFacilityCamp"
          ></textarea>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile>
        <mat-form-field appearance="fill">
          <mat-label>Contact number</mat-label>
          <textarea
            matInput
            cdkTextareaAutosize
            #autosize="cdkTextareaAutosize"
            cdkAutosizeMinRows="1"
            cdkAutosizeMaxRows="5"
            placeholder="Ex. 0345 1234123"
            [(ngModel)]="hypothisis.phoneNumber"
          ></textarea>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile>
        <mat-form-field appearance="fill">
          <mat-label>Organization name</mat-label>
          <textarea
            matInput
            cdkTextareaAutosize
            #autosize="cdkTextareaAutosize"
            cdkAutosizeMinRows="1"
            cdkAutosizeMaxRows="5"
            placeholder="Ex. Organization"
            [(ngModel)]="hypothisis.organizationName"
          ></textarea>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile>
        <mat-form-field appearance="fill">
          <mat-label>Catchment Population</mat-label>
          <input
            matInput
            placeholder="Ex. 2345"
            [(ngModel)]="hypothisis.catchmentPopulation"
          />
        </mat-form-field>
      </mat-grid-tile>
    </mat-grid-list>
  </div>
</section>
<div class="spacer1"></div>
<div class="spacer1"></div>
<div class="container">
  <div class="row">
    <div class="col-12">
      <h2 class="h2 border-bottom">Questions</h2>
    </div>
    <div class="spacer1"></div>
    <div class="col-12">
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th scope="col" rowspan="3">#</th>
            <th scope="col" rowspan="3">Disease / Syndromes</th>

            <th scope="colgroup" colspan="4" class="text-center">Cases</th>
            <th scope="colgroup" colspan="4" class="text-center">Deaths</th>
          </tr>

          <tr class="text-center">
            <th colspan="2">&lt; 5 years</th>
            <th colspan="2">&ge; 5 years</th>
            <th colspan="2">&lt; 5 years</th>
            <th colspan="2">&ge; 5 years</th>
          </tr>

          <tr class="text-center">
            <th class="td-size">M</th>
            <th class="td-size">F</th>
            <th class="td-size">M</th>
            <th class="td-size">F</th>

            <th class="td-size">M</th>
            <th class="td-size">F</th>
            <th class="td-size">M</th>
            <th class="td-size">F</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let que of questions; let i = index">
            <th scope="row">{{ i + 1 }}</th>
            <td class="text-left">{{ que.q }}</td>

            <td>
              <input
                type="number"
                [(ngModel)]="que.case.lessThen5.male"
                (ngModelChange)="
                  onChangeCase($event, 'case', 'lessThen5', 'male')
                "
                class="form-control input-m-f"
              />
            </td>
            <td>
              <input
                type="number"
                [(ngModel)]="que.case.lessThen5.female"
                (ngModelChange)="
                  onChangeCase($event, 'case', 'lessThen5', 'female')
                "
                class="form-control input-m-f"
              />
            </td>
            <td>
              <input
                type="number"
                [(ngModel)]="que.case.greaterThen5.male"
                (ngModelChange)="
                  onChangeCase($event, 'case', 'greaterThen5', 'male')
                "
                class="form-control input-m-f"
              />
            </td>
            <td>
              <input
                type="number"
                [(ngModel)]="que.case.greaterThen5.female"
                (ngModelChange)="
                  onChangeCase($event, 'case', 'greaterThen5', 'female')
                "
                class="form-control input-m-f"
              />
            </td>

            <td>
              <input
                type="number"
                [(ngModel)]="que.death.lessThen5.male"
                (ngModelChange)="
                  onChangeCase($event, 'death', 'lessThen5', 'male')
                "
                class="form-control input-m-f"
              />
            </td>

            <td>
              <input
                type="number"
                [(ngModel)]="que.death.lessThen5.female"
                (ngModelChange)="
                  onChangeCase($event, 'death', 'lessThen5', 'female')
                "
                class="form-control input-m-f"
              />
            </td>

            <td>
              <input
                type="number"
                [(ngModel)]="que.death.greaterThen5.male"
                (ngModelChange)="
                  onChangeCase($event, 'death', 'greaterThen5', 'male')
                "
                class="form-control input-m-f"
              />
            </td>

            <td>
              <input
                type="number"
                [(ngModel)]="que.death.greaterThen5.female"
                (ngModelChange)="
                  onChangeCase($event, 'death', 'greaterThen5', 'female')
                "
                class="form-control input-m-f"
              />
            </td>
          </tr>
        </tbody>
        <tfoot>
          <tr class="text-center">
            <th colspan="2" scope="row">TOTAL</th>
            <th>{{ questionSumData["case"].lessThen5.male }}</th>
            <th>{{ questionSumData["case"].lessThen5.female }}</th>
            <th>{{ questionSumData["case"].greaterThen5.male }}</th>
            <th>{{ questionSumData["case"].greaterThen5.female }}</th>

            <th>{{ questionSumData["death"].lessThen5.male }}</th>
            <th>{{ questionSumData["death"].lessThen5.female }}</th>
            <th>{{ questionSumData["death"].greaterThen5.male }}</th>
            <th>{{ questionSumData["death"].greaterThen5.female }}</th>
          </tr>
        </tfoot>
      </table>
    </div>
    <div class="col-12 col-lg-4">
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th scope="col">Rapid Antigen Tests Conducted</th>
            <th scope="col">Total Tests</th>
            <th scope="col">Positive</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let testData of rapidAntigenTest">
            <td class="text-left">{{ testData["testName"] }}</td>
            <td>
              <input
                type="number"
                [(ngModel)]="testData['tests']"
                class="form-control input-m-f"
              />
            </td>
            <td>
              <input
                type="number"
                [(ngModel)]="testData['positive']"
                class="form-control input-m-f"
              />
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="col-12 col-lg-4 m-auto text-right">
      <button
        type="button"
        class="btn btn-success mr-1"
        (click)="handleSave()"
        *ngIf="userid !== 'admin' && userid !== 'muhammadshahid.15.pk'"
      >
        Save Data
      </button>
      <button
        type="button"
        class="btn btn-primary"
        (click)="handleShowTodayData()"
        *ngIf="userid === 'admin' || userid === 'muhammadshahid.15.pk'"
      >
        Show All Today's Data
      </button>
      <div class="spacer1"></div>
      <div class="spacer1"></div>
    </div>
  </div>
</div>
